{% extends 'core/_base_panel.html' %}
{% load static %}

{% block title %}
    اطلاعات dialplan
{% endblock %}

{% block secondary_title %}
    اطلاعات dialplan
{% endblock %}

{% block secondary_title_detail %}{% endblock %}

{% block content %}
    <span class="loader" id="loader" style="display: none"></span>

    <div class="row g-6 g-xl-9">
        <div class="card">
            <div class="card-header align-items-center py-5 gap-2 gap-md-5" data-select2-id="select2-data-124-w3ha">
                <!--end::Card title-->
                <!--begin::Card toolbar-->
                <div class="card-toolbar flex-row-fluid justify-content-start gap-5"
                     data-select2-id="select2-data-123-36cp">

                    <div class="row">
                        <div class="col-6">
                            <select name="logs" class="form-select form-select-solid" id="get-logs-in">
                                <option value="internal" selected>داخلی - internal</option>
                            </select>
                        </div>
                        <div class="col-6">
                            <button class="btn btn-primary" id="get-logs-btn">ارسال درخواست
                            </button>
                        </div>
                    </div>
                </div>
                <!--end::Card toolbar-->
            </div>
        </div>


        <div class="col-12">
            <p class="fw-bolder h4 text-center">بر اساس اتصال ها</p>
        </div>
        <div class="col-md-6 col-xl-4">
            <!--begin::Card-->
            <a href=""
               class="card border-hover-primary">
                <!--begin::Card header-->
                <div class="card-header border-0 pt-9">
                    <div class="card-toolbar">
                        <span class="badge badge-light-success fw-bolder me-auto px-4 py-3">
                                دامنه: 200@192.168.43.121:64961
                            </span>
                    </div>
                    <!--end::Card toolbar-->
                </div>
                <!--end:: Card header-->
                <!--begin:: Card body-->
                <div class="card-body p-9">
                    <!--begin::نام-->
                    <div class="fs-4 fw-bolder text-dark mb-4">
                        کانال: 200
                    </div>
                    <div class="d-flex flex-wrap mb-5">
                        <!--begin::Due-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                TCP
                            </div>
                            <div class="fw-bold text-gray-400">نوع پورت</div>
                        </div>
                        <!--end::Due-->
                        <!--begin::بودجه-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                Added
                            </div>
                            <div class="fw-bold text-gray-400">نوع</div>
                        </div>
                        <!--end::بودجه-->
                    </div>
                    <div class="d-flex flex-wrap mb-5">
                        <!--begin::Due-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                3600
                            </div>
                            <div class="fw-bold text-gray-400">زمان انقضا</div>
                        </div>
                        <!--end::Due-->
                        <!--begin::بودجه-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                None
                            </div>
                            <div class="fw-bold text-gray-400">ID-Hash</div>
                        </div>
                        <!--end::بودجه-->
                    </div>
                </div>
                <!--end:: Card body-->
            </a>
            <!--end::Card-->
        </div>
        <div class="col-md-6 col-xl-4">
            <!--begin::Card-->
            <a href=""
               class="card border-hover-primary">
                <!--begin::Card header-->
                <div class="card-header border-0 pt-9">
                    <div class="card-toolbar">
                        <span class="badge badge-light-success fw-bolder me-auto px-4 py-3">
                                دامنه: 200@192.168.43.121:64961
                            </span>
                    </div>
                    <!--end::Card toolbar-->
                </div>
                <!--end:: Card header-->
                <!--begin:: Card body-->
                <div class="card-body p-9">
                    <!--begin::نام-->
                    <div class="fs-4 fw-bolder text-dark mb-4">
                        کانال: 200
                    </div>
                    <div class="d-flex flex-wrap mb-5">
                        <!--begin::Due-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                TCP
                            </div>
                            <div class="fw-bold text-gray-400">نوع پورت</div>
                        </div>
                        <!--end::Due-->
                        <!--begin::بودجه-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                Added
                            </div>
                            <div class="fw-bold text-gray-400">نوع</div>
                        </div>
                        <!--end::بودجه-->
                    </div>
                    <div class="d-flex flex-wrap mb-5">
                        <!--begin::Due-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                3600
                            </div>
                            <div class="fw-bold text-gray-400">زمان انقضا</div>
                        </div>
                        <!--end::Due-->
                        <!--begin::بودجه-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                None
                            </div>
                            <div class="fw-bold text-gray-400">ID-Hash</div>
                        </div>
                        <!--end::بودجه-->
                    </div>
                </div>
                <!--end:: Card body-->
            </a>
            <!--end::Card-->
        </div>
        <div class="col-md-6 col-xl-4">
            <!--begin::Card-->
            <a href=""
               class="card border-hover-primary">
                <!--begin::Card header-->
                <div class="card-header border-0 pt-9">
                    <div class="card-toolbar">
                        <span class="badge badge-light-success fw-bolder me-auto px-4 py-3">
                                دامنه: 200@192.168.43.121:64961
                            </span>
                    </div>
                    <!--end::Card toolbar-->
                </div>
                <!--end:: Card header-->
                <!--begin:: Card body-->
                <div class="card-body p-9">
                    <!--begin::نام-->
                    <div class="fs-4 fw-bolder text-dark mb-4">
                        کانال: 200
                    </div>
                    <div class="d-flex flex-wrap mb-5">
                        <!--begin::Due-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                TCP
                            </div>
                            <div class="fw-bold text-gray-400">نوع پورت</div>
                        </div>
                        <!--end::Due-->
                        <!--begin::بودجه-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                Added
                            </div>
                            <div class="fw-bold text-gray-400">نوع</div>
                        </div>
                        <!--end::بودجه-->
                    </div>
                    <div class="d-flex flex-wrap mb-5">
                        <!--begin::Due-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                3600
                            </div>
                            <div class="fw-bold text-gray-400">زمان انقضا</div>
                        </div>
                        <!--end::Due-->
                        <!--begin::بودجه-->
                        <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                            <div class="fs-6 text-gray-800 fw-bolder">
                                None
                            </div>
                            <div class="fw-bold text-gray-400">ID-Hash</div>
                        </div>
                        <!--end::بودجه-->
                    </div>
                </div>
                <!--end:: Card body-->
            </a>
            <!--end::Card-->
        </div>
        <div class="alert alert-danger h6">
            دیتا یافت نشد!
        </div>


    </div>

{% endblock %}

{% block meta_js_code %}
    <script>
        $(document).ready(function () {
            $('#get-logs-btn').click(function () {
                var formChoice = $('#get-logs-in').val()

                $.ajax({
                    url: "/detail_dialplan",
                    type: "POST",
                    dataType: "json",
                    data: JSON.stringify({
                        payload: {
                            type: formChoice
                        }
                    }),
                    headers: {
                        "X-Requested-With": "XMLHttpRequest",
                        "X-CSRFToken": getCookie("csrftoken")
                    },
                    beforeSend: function () {
                        console.log('Sending...')
                        $('#loader').show()
                    },
                    success: (data) => {
                        if (data) {
                            console.log(data)
                            $('#loader').hide()
                            // TODO: show data in DOM
                        }
                    },
                    error: (data) => {
                        $('#loader').hide()
                        Swal.fire({
                            icon: 'question',
                            title: "مشکلی پیش آمده لطفا دوباره امتحان کنید."
                        })
                    }
                })
            })
        })
    </script>
{% endblock %}